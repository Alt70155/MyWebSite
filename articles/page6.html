<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=480">
  <title>リモートサーバからローカルへディレクトリを転送する方法</title>
  <link href="https://fonts.googleapis.com/css?family=Ropa+Sans" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <link rel="shortcut icon" href="../images/favicon.png">
  <link rel="stylesheet" href="../css.css">
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</head>

<body id="article_common">

  <!--header-->
  <header>
    <div class="nav-flex">
      <div class="logo">
        <a href="http://knowledge-blog.net">
          <h1 class="top">Knowledge of programming</h1>
          <p class="sub-title">専門学生の技術系・WEB開発ブログ</p>
        </a>
      </div>
      <nav>
        <ul class="global-nav">
          <li><a href="../index.html">Blog</a></li>
          <li><a href="../profile.html">Profile</a></li>
          <li><a href="../portfolio.html">Portfolio</a></li>
        </ul>
      </nav>
    </div>
    <div class="blog-nav">
      <ul class="main-nav">
        <li><a href="../category/nav_htmlcss.html">HTML/CSS</a></li>
        <li><a href="../category/nav_javascript.html">JavaScript</a></li>
        <li><a href="../category/nav_ope.html">サイト運営</a></li>
        <li><a href="../category/nav_other.html">その他</a></li>
      </ul>
    </div>
  </header>


  <!--wrap-->
  <div id="wrap">
    <div class="content">
      <div class="text-content">

        <div class="text-title">
          <h1>リモートサーバからローカルへディレクトリを転送する方法</h1>
        </div>

        <p>ファイルをやり取りするだけならtera termのscpを使えば簡単にできるのですが、ディレクトリごと持ってきたい時に困ったのでメモ</p>

        <p>環境はCentOS7(リモート)からwindows(ローカル)のデスクトップへディレクトリをコピーする。</p>

        <div class="text-sub-title">
          <h2 class="sub-title-border">&nbsp;やり方</h2>
        </div>

        <p>
          ローカル(windowsのほう)のコマンドラインで<br>
          <pre class="prettyprint linenums"><code>scp -i C:/Users/name/Documents/private_key_file -r -P 1234 user@192.168.x.y:/var/www/html/ C:/Users/name/Desktop
          </code></pre>
          以上のコマンドでサーバの/var/www/html/配下にあるディレクトリを丸ごとローカルのdesktopにコピーできました。
          もしかしたらtera termでもできるかもしれませんが、調べた所これで出来たのでひとまず良しとしましょう。。。
        </p>
        <h2 class="sub-title-border">&nbsp;引数・オプションの説明</h2>
        <p>
          <b>・-i [ファイルの絶対パス]</b><br>
          ssh時に必要な秘密鍵を指定する引数。-iの後にローカルに保存されている秘密鍵の絶対パスを記述する(sshを公開鍵認証にしている場合のみ) <br><br>
          <b>・-r </b><br>
          これをつける事によりサーバから持ってくるものをディレクトリにすることができる。ないとファイルのみ <br><br>
          <b>・-P [ポート番号]</b><br>
          sshのポート番号を変えてる人が多いと思いますが、その場合ポート番号を指定しなければいけないです。 <br><br>
          <b>・user@192.168.x.y:/var/www/html/ </b><br>
          リモート先のユーザとipを指定し、持ってきたいディレクトリのパスを指定(ここではwebサーバのドキュメントルート) <br><br>
          <b>・C:/Users/name/Desktop </b><br>
          最後にローカル側のディレクトリの置き場所を指定。 <br><br>
          他の記事では、-iが無かったり-Pが無かったりとしていたのですが、ポートを変えている場合や公開鍵にしている場合、上のやつを指定しないと出来ませんでした。(permission deniedや22番が空いてませんとエラーが出る)<br>
          他にも、/が¥になっていたせいで出来なかったなどありました。
        </p>
      </div>
    </div>
  </div>
  <!--footer-->
  <footer>
    <small>(C)2018 knowledge-Blog.</small>
  </footer>
</body>

</html>
